(()=>{"use strict";const e=(e,t)=>{let a=0,c=!1;const s=()=>e,n=()=>(a>=s()&&(c=!0),!1);return{hit:()=>(a++,a>=s()&&n(),a),isSunk:n,getLength:s,getName:()=>t,getNumberofHits:()=>a}},t=t=>{const a=[{ship:e(5,"Carrier"),placed:!1},{ship:e(4,"Battleship"),placed:!1},{ship:e(3,"Destroyer"),placed:!1},{ship:e(3,"Submarine"),placed:!1},{ship:e(2,"Patrol Boat"),placed:!1}],c=(()=>{const e=[],t=()=>e,a=e=>{const a=t();let c;for(let t=0;t<a.length;t++)JSON.stringify(a[t].cord)===JSON.stringify(e)&&(c=a[t],c.isOccupied=!0)},c=[],s=e=>{const a=t();let c;for(let t=0;t<a.length;t++)if(JSON.stringify(a[t].cord)===JSON.stringify(e))return c=a[t],!1===c.isOccupied;return!1},n=[];return{createGameboard:()=>{for(let t=0;t<=9;t++)for(let a=0;a<=9;a++){const c={cord:[],isOccupied:!1,isAttacked:!1};c.cord[0]=t,c.cord[1]=a,e.push(c)}return e},getGameBoardArray:t,placeShip:(e,t,c)=>{const s=e(c,t);if(!1===s)return!1;const n=s;for(let e=0;e<n.length;e++){const t=n[e];a(t)}return n},checkCordinates:s,placeShipHorizontalyRight:(e,t)=>{const a=t.getLength();let c=e[1];const n=[];for(let t=0;t<a;t++){c=e[1],c+=t;const a=[e[0],c];n.push(a)}return!!n.every((e=>s(e)))&&n},placeShipHorizontalyLeft:(e,t)=>{const a=t.getLength();let c=e[1];const n=[];for(let t=a-1;t>=0;t--){c=e[1],c-=t;const a=[e[0],c];n.push(a)}return!!n.every((e=>s(e)))&&n},placeShipVerticalyUp:(e,t)=>{const a=t.getLength();let c=e[0];const n=[];for(let t=a-1;t>=0;t--){c=e[0],c-=t;const a=[c,e[1]];n.push(a)}return!!n.every((e=>s(e)))&&n},placeShipVerticalyDown:(e,t)=>{const a=t.getLength();let c=e[0];const n=[];for(let t=0;t<a;t++){c=e[0],c+=t;const a=[c,e[1]];n.push(a)}return!!n.every((e=>s(e)))&&n},getShipLocations:()=>c,addShipLocation:(e,t)=>{const a={shipObject:t,shipCordinates:e};return c.push(a)},receiveAttack:e=>{const a=(e=>{const a=t();let c;for(let t=0;t<a.length;t++)if(JSON.stringify(a[t].cord)===JSON.stringify(e))return c=t,c;return!1})(e),s=t()[a];if(!0===s.isAttacked)return!1;s.isAttacked=!0;const r=(e=>{for(let t=0;t<c.length;t++)for(let a=0;a<c[t].shipCordinates.length;a++)if(JSON.stringify(c[t].shipCordinates[a])===JSON.stringify(e)){const e=c[t].shipCordinates.indexOf(c[t].shipCordinates[a]),s=c[t].shipObject;if(c[t].shipCordinates.splice(e,1),0===c[t].shipCordinates.length){c.splice(t,1);break}return s}return!1})(e);return!1===r?(n.push(e),n):r},allShipsSunk:()=>0===c.length}})();c.createGameboard();const s=c.getGameBoardArray(),n=c.placeShipVerticalyUp,r=c.placeShipVerticalyDown,i=c.placeShipHorizontalyRight,d=c.placeShipHorizontalyLeft,o=e=>(!0===a[e].placed&&(a[e].placed=!1),a[e].ship),l=e=>!0!==s[e].isOccupied&&s[e].cord,p=e=>"up"===e?n:"down"===e?r:"right"===e?i:"left"===e&&d;return{getName:()=>t,ships:a,playersGameboard:s,attack:e=>e,gameboardObject:c,selectShip:o,selectDirection:p,selectCordinates:l,placeShip:(e,t,s)=>{const n=l(s),r=p(t),i=o(e);return"false"!==a[e].placed||!1!==n&&!1!==r&&(console.log(c.placeShip(r,i,n)),c.placeShip(r,i,n))}}},a=document.querySelector(".content"),c=(()=>{const e=t("Player 1"),a=t("Player 2"),c=e;return e.ships,a.ships,{currentPlayer:c}})();(()=>{const e=c.currentPlayer,t=()=>{for(;a.hasChildNodes();)a.removeChild(a.firstChild)},s=()=>{const e=document.createElement("header");a.appendChild(e)},n=()=>{const e=document.createElement("h1");e.textContent="Battleship",a.appendChild(e)},r=t=>{t.currentTarget;const a=document.querySelectorAll(".ship"),c=document.querySelectorAll(".square"),s=document.querySelectorAll(".direction"),n=(()=>{let e;return c.forEach((t=>"true"===t.dataset.active&&(e=t.dataset.index,e))),e})(),r=(()=>{let e;return a.forEach((t=>"true"===t.dataset.active&&(e=t.dataset.index,e))),e})(),i=(()=>{let e;return s.forEach((t=>"true"===t.dataset.active&&(e=t.id,e))),e})();n&&r&&i&&(e.placeShip(r,i,n),console.log(e.playersGameboard))},i=t=>{const a=t.currentTarget;return t.stopPropagation(),document.querySelectorAll(".ship").forEach((e=>{"true"===e.dataset.active&&(e.dataset.active="false",e.lastChild.classList.add("hidden"))})),"false"===a.dataset.active?(a.dataset.active="true",a.lastChild.classList.remove("hidden"),e.selectShip(a.dataset.index)):(a.dataset.active="false",!1)},d=()=>{const t=document.createElement("div");t.classList.add("monitor"),a.appendChild(t),(()=>{const t=e.playersGameboard,a=document.createElement("div"),c=document.querySelector(".monitor");a.classList.add("gameboard"),t.forEach((e=>{const c=e,s=document.createElement("div");s.classList.add("square"),s.textContent=c.cord,s.dataset.index=t.indexOf(e),s.dataset.isAttacked=c.isAttacked,s.dataset.isOccupied=c.isOccupied,s.dataset.active="false",a.appendChild(s)})),c.appendChild(a)})()},o=e=>{const t=e.currentTarget;document.querySelectorAll(".square").forEach((e=>{"true"===e.dataset.active&&(e.dataset.active="false")})),"false"===t.dataset.active&&(t.dataset.active="true")},l=t=>{const a=t.currentTarget;return t.stopPropagation(),document.querySelectorAll(".direction").forEach((e=>{"true"===e.dataset.active&&(e.dataset.active="false")})),"false"===a.dataset.active?(a.dataset.active="true",e.selectDirection(a.id)):(a.dataset.active="false",!1)},p=a=>{const c=document.querySelector(".gameboard");"false"===a.target.dataset.active&&(c.classList.remove("hidden"),a.target.dataset.active="true",a.target.classList.add("hidden"),t(),s(),n(),d(),(()=>{const t=document.createElement("div");t.classList.add("ships"),document.querySelector(".monitor").appendChild(t),e.ships.forEach((a=>{const c=document.createElement("div");c.classList.add("ship"),c.dataset.active=!1,c.dataset.index=e.ships.indexOf(a),c.dataset.numberOfHits=a.ship.getNumberofHits(),c.dataset.isSunk=a.ship.isSunk();const s=document.createElement("h3");s.textContent=`${a.ship.getName()}`;const n=document.createElement("p");n.textContent=`Size = ${a.ship.getLength()}`;const r=document.createElement("button");r.textContent="Place Ship!",r.dataset.active="true",r.classList.add("hidden"),r.classList.add("place-ship"),t.appendChild(c),c.appendChild(s),c.appendChild(n),c.appendChild(r)}))})(),(()=>{const e=document.createElement("div");e.classList.add("controller");const t=document.createElement("div");t.classList.add("controls");const a=document.createElement("h2");a.textContent="Select orientation of ship",e.appendChild(a);const c=document.createElement("button");c.textContent="Up",c.classList.add("direction"),c.setAttribute("id","up"),c.dataset.active="false";const s=document.createElement("button");s.textContent="Down",s.classList.add("direction"),s.setAttribute("id","down"),s.dataset.active="false";const n=document.createElement("button");n.textContent="Right",n.classList.add("direction"),n.setAttribute("id","right"),n.dataset.active="false";const r=document.createElement("button");r.textContent="Left",r.classList.add("direction"),r.setAttribute("id","left"),r.dataset.active="false",document.querySelector(".monitor").appendChild(e),e.appendChild(t),t.appendChild(c),t.appendChild(s),t.appendChild(n),t.appendChild(r)})(),document.querySelectorAll(".ship").forEach((e=>{e.addEventListener("click",i)})),document.querySelectorAll(".direction").forEach((e=>{e.addEventListener("click",l)})),document.querySelectorAll(".square").forEach((e=>{e.addEventListener("click",o)})),document.querySelectorAll(".place-ship").forEach((e=>{e.addEventListener("click",r)})))},u=c=>{const r=c.target;"false"===r.dataset.active&&(r.dataset.active="true",t(),s(),n(),d(),(()=>{const t=document.createElement("button");t.classList.add("player-start"),t.textContent=`${e.getName()} Start!`,t.dataset.active="false",a.appendChild(t)})(),document.querySelector(".player-start").addEventListener("click",p))};return{displayHome:()=>{s(),n(),(()=>{const e=document.createElement("button");e.classList.add("start"),e.textContent="Start",e.dataset.active=!1,a.appendChild(e)})(),document.querySelector(".start").addEventListener("click",u)}}})().displayHome()})();